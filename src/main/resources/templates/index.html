<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: header"></head>
<body>

<div id="app">

    <!-- inline template (can use thymeleaf within an inline template) -->

    <div class="container">
        <div class="row" th:if="${filtered}">
            <div class="col-xs-12 text-center">
                <a th:href="@{/}" href="/">View all</a>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <h1 th:text="#{index.site.headline}">Chat demo</h1>
            </div>
        </div>

        <!--<app-textinput sec:authorize="isAuthenticated()"></app-textinput>-->
        <app-textmessages inline-template>

            <div id="chat-window-container">
                <div id="chat-window" class="text-center">
                    <div>
                        <li class="list-group-item" :class="message.textClass" v-for="message in messages">{{message.data}}</li>
                    </div>
                    <div :class="connected ? 'text-success' : 'text-danger'">{{connected ? 'Connected' : 'Disconnected'}}</div>
                    <div sec:authorize="isAuthenticated()">
                        <input type="text" @keydown="nextCharacter" v-model="currentMessage"></input>
                        <button @click="carriageReturn">Send</button>
                    </div>
                    <div id="current-line" :class="textColor">{{currentLine}}</div>
                    <button v-if="connected" @click="disconnect">Disconnect</button>
                    <button v-else @click="connect">Connect</button>
                </div>
            </div>
        </app-textmessages>
    </div>
</div>

<div th:replace="fragments/footer :: footer"></div>
<div th:replace="fragments/scripts :: scripts"></div>

</body>
</html>